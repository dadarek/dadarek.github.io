!function(){window.EventParser=function(){function t(t,e,n){this.interpreter=t,this.dateFilter=e,this.i18n=n}return t.prototype.parse=function(t){var e;return e=this._mapAndFilter(t.items),this._massesAndReconciliations(e).concat(this._otherEvents(e))},t.prototype._otherEvents=function(t){var e,n,i=this;return e=_.filter(t,function(t){return!i.interpreter.isMass(t.name)&&!i.interpreter.isReconciliation(t.name)}),n=e.map(function(t){return t.name}),n=this._removeDuplicates(n),n.map(function(t){return{name:t,times:i._getEventTimes(e,function(e){return e.name.trim().toLowerCase()===t.trim().toLowerCase()})}})},t.prototype._removeDuplicates=function(t){return _.uniq(t,function(t){return t.trim().toLowerCase()})},t.prototype._massesAndReconciliations=function(t){var e,n,i=this;return e=this._getEventTimes(t,function(t){return i.interpreter.isMass(t.name)}),n=this._getEventTimes(t,function(t){return i.interpreter.isReconciliation(t.name)}),[{name:this.i18n.mass,eventMissing:this.i18n.noMasses,times:e},{name:this.i18n.reconciliation,eventMissing:this.i18n.noReconciliations,times:n}]},t.prototype._getEventTimes=function(t,e){var n,i;return n=_.filter(t,e),i=this._toTimeObject(n)},t.prototype._toTimeObject=function(t){var e=this;return t.map(function(t){return{time:t.time,language:e.interpreter.getLanguage(t.name)}}).sort(function(t,e){return t.time<e.time?-1:e.time<t.time?1:0})},t.prototype._mapAndFilter=function(t){var e=this;return t=_.filter(t,function(t){return t.start}),t=t.map(function(t){return{name:t.summary,date:t.start.dateTime.substr(0,10),time:t.start.dateTime.substr(11,5),originalStart:t.start.dateTime}}),t=_.filter(t,function(t){return e.dateFilter(t.originalStart)})},t}()}.call(this);